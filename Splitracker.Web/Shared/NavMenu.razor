@using Microsoft.AspNetCore.Hosting
@inject FlagContextHolder holder
@inject IWebHostEnvironment hostEnvironment;

<MudStack>
    <MudNavMenu>
        <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.EmojiPeople">Charaktere</MudNavLink>
        @if (experimental)
        {
            <MudNavLink
                Href="/Groups"
                Match="NavLinkMatch.Prefix"
                Icon="@Icons.Filled.People">Gruppen</MudNavLink>
            <MudNavLink
                Href="/Ticks"
                Match="NavLinkMatch.Prefix"
                Icon="@Icons.Filled.ViewTimeline">Ticks</MudNavLink>
        }
    </MudNavMenu>
    @if (hostEnvironment.EnvironmentName != "Production")
    {
        <MudSwitch
            @bind-Checked="experimental"
            class="ml-2">Experimente</MudSwitch>
    }
</MudStack>

@code {
    [CascadingParameter]
    public required FlagContext? Flags { get; set; }

    bool experimental
    {
        get => Flags?.Experimental ?? false;
        set => holder.Context = holder.Context with { Experimental = value };
    }
}